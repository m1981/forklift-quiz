# 4. UI/UX Components (The "Look")

## 4.1. Design Philosophy
*   **Mobile-First:** All components are designed to fit comfortably on a vertical smartphone screen (360px width minimum).
*   **Touch-Friendly:** Buttons and interactive elements have a minimum height of **44px** (standard touch target size).
*   **Minimalist:** Distractions (headers, footers, sidebars) are hidden by default to maximize screen real estate for the quiz content.
*   **Feedback-Driven:** Every user action (click, selection) provides immediate visual feedback (color change, icon update).

---

## 4.2. Core Components (`src/components/mobile/`)

These are the building blocks of the application. They are implemented as custom Streamlit Components (HTML/CSS/JS strings) to bypass standard Streamlit limitations.

### A. `mobile_header`
*   **Purpose:** Persistent top bar showing context and progress.
*   **Props:**
    *   `context`: String (e.g., "1/15 â€¢ BHP").
    *   `progress`: Float (0.0 to 1.0).
*   **Behavior:**
    *   Displays a "Home" icon (ðŸ ) on the left.
    *   Displays a progress bar filling from left to right.
    *   **Action:** Clicking "Home" triggers a navigation event to the Dashboard.

### B. `mobile_hero`
*   **Purpose:** The main dashboard header.
*   **Demo Behavior:**
    *   If the app is initialized with `?demo={slug}`, the `logo_src` prop is dynamically swapped to display the prospect's logo (e.g., Tesla, Coca-Cola) instead of the default app logo.
    *   This creates an immediate "personalized" feeling for the sales lead.
*   **Props:**
    *   `title`: App Name.
    *   `logo_src`: Base64 image string.
    *   `progress`: Global mastery percentage.
    *   `mastered_count`: Number of mastered questions.
    *   `total_count`: Total questions in DB.
    *   `finish_date_str`: Estimated completion date.
*   **Visuals:**
    *   Large Logo on the left.
    *   Title and Progress Bar in the center.
    *   "Days Left" metric on the right.

### C. `mobile_dashboard` (The Grid)
*   **Purpose:** The main navigation menu.
*   **Structure:**
    *   **Sprint Card:** A prominent, green-highlighted card at the top ("ðŸš€ Start Daily Sprint").
    *   **Category List:** A vertical list of cards for each topic (BHP, Diagrams, Law).
*   **Interaction:**
    *   Clicking a card triggers a navigation event (`SPRINT` or `CATEGORY`).
    *   Each card displays a mini-progress bar and mastery count (e.g., "5/20").

### D. `mobile_option` (The Answer Button)
*   **Purpose:** Represents a single choice in a multiple-choice question.
*   **Props:**
    *   `key_char`: "A", "B", "C", or "D".
    *   `text`: The option content.
*   **States:**
    *   **Default:** White background, grey border.
    *   **Active (Pressed):** Light grey background.
*   **Behavior:** Returns the `key_char` immediately upon click.

### E. `mobile_result_row` (The Feedback Row)
*   **Purpose:** Displays the result of an answer in the Feedback view. Read-only.
*   **Props:**
    *   `state`: Enum (`correct`, `wrong`, `missed`, `neutral`).
*   **Visuals:**
    *   **Correct (Green):** Light green background, checkmark icon.
    *   **Wrong (Red):** Light red background, cross icon.
    *   **Missed (Dashed Green):** Dashed green border (indicates the correct answer the user *didn't* pick).

---

## 4.3. Interaction Patterns

### A. The "Pill" Selector (Language Toggle)
*   **Context:** Used in Hints and Explanations.
*   **Behavior:**
    *   Displays available languages as small, clickable chips.
    *   **Selection:** Clicking a chip updates the displayed text **immediately** without a full page reload (using `st.rerun` internally).
    *   **Persistence:** The selection is saved to the database as the new default preference.

### B. The "Next" Flow
*   **Context:** Feedback Screen.
*   **Component:** Standard Streamlit Button (`st.button("Dalej âž¡ï¸", type="primary")`).
*   **Behavior:**
    *   Advances the question index.
    *   Resets the view mode to "Active".
    *   Scrolls to top (handled by Streamlit's rerun mechanic).

### C. The "Summary" Actions
*   **Context:** End of Quiz.
*   **Primary Action:** "Menu GÅ‚Ã³wne" (Return to Dashboard).
*   **Secondary Action:** "Popraw BÅ‚Ä™dy" (Review Mistakes). Only visible if `errors > 0`.
*   **Visuals:** Uses `st.columns` to place buttons side-by-side on mobile.

---

## 4.4. Responsive Design Rules

1.  **Hide Native Elements:** The app uses custom CSS (`src/quiz/presentation/views/components.py`) to hide the standard Streamlit header, footer, and hamburger menu.
2.  **Full Width:** All custom components use `width: 100%` and `box-sizing: border-box` to fill the mobile viewport without horizontal scrolling.
3.  **Vertical Rhythm:** Consistent spacing (8px or 16px) between cards and text blocks to ensure readability on small screens.
